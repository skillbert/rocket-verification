
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% text for auto-complete, remove for report %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ignite_bm,
% stop_bm,
% confirm_bm_thrust,
% fail_bm_thrust,
% detach_from_lm,

% c_confirm_bm_thrust,
% c_stopped_bm,
% c_fail_bm_thrust,
% c_detach_bm,
% c_detached_bm,

% %launch module
% ignite_lm,
% confirm_lm_thrust,
% fail_lm_thrust,
% stop_lm,
% detach_ground_clamps,
% abort_pad,

% %toggle comment for 1/2/3 boosters
% c_startup_bm,
% c_stop_bm,
% % c_startup_bm|c_startup_bm,
% % c_stop_bm|c_stop_bm,
% % c_startup_bm|c_startup_bm|c_startup_bm,
% % c_stop_bm|c_stop_bm|c_stop_bm,

% c_lm_abort,
% c_lm_ready_detach,

% %orbital module
% detach_lm,
% ignite_om,
% confirm_om_thrust,
% stop_om,
% fail_om_thrust,

% c_om_abort,
% c_om_ready_detach,
% c_detach_ascent_cover,

% %crew module
% detach_om,
% abort_cm,
% chutes_cm,
% detach_descent_cover,
% airbags_cm,
% land_cm,
% do_space_stuff,
% detach_ascent_cover,

% %fuel sensors
% c_bm_fuel_empty,

% %altitude sensor/gps
% c_alt_stage_lm,
% c_alt_stage_om

%%%%%%%%%%
% Global %
%%%%%%%%%%

% always be possible to land after takeoff
 ([true* . detach_ground_clamps] mu X. ([!land_cm] X && <true> true))


%%%%%%%%%%%%%%%%%%
% Booster Module %
%%%%%%%%%%%%%%%%%%
 &&


%The boosters can only detach after depleting their fuel (S)
([!c_bm_fuel_empty* . c_detach_bm(left)|c_detach_bm(right)] false)

 &&
 %The boosters should not separate while they are still on (S)
([!(c_stop_bm(right)|c_stop_bm(left))* . (c_detach_bm(right)|c_detach_bm(left))] false)


%%%%%%%%%%%%%%%%%
% Launch Module %
%%%%%%%%%%%%%%%%%
&&
% After depleting its fuel, the LM will detach (L)
(
    [true* . c_lm_fuel_empty] <true*.detach_lm> true
)

&&
% All engines should confirm thrust before the ground clamp release (S)
(
    ([!confirm_lm_thrust* . detach_ground_clamps] false) && (forall i:BoosterId. [!c_confirm_bm_thrust(i)* . detach_ground_clamps] false)
)

%%%%%%%%%%%%%%%%%%
% Orbital Module %
%%%%%%%%%%%%%%%%%%
&&
% The orbital module steering valves should be re-mapped before detaching the service module. (S)
% Nog niet goed. Detachment kan ook gebeuren na abort van OM/LM

(
     [!remap_valves_om* . detach_om] ([abort_cm] true && <true>true)
)

&&
(
    [!detach_ascent_cover* . ignite_om] false
)